<!-- Mensaje de cierre administrativo -->
<div *ngIf="settings()?.ordersClosed" class="alert alert-danger">
  <h4>ğŸ”’ {{ settings()!.closedMessage }}</h4>
  <p *ngIf="getClosedUntilDate()">
    <strong>Reapertura prevista:</strong> {{ getClosedUntilDate() }}
  </p>
</div>

<!-- Estado de la ventana de pedidos -->
<div *ngIf="orderWindowStatus() && !settings()?.ordersClosed">
  <div class="alert alert-success" *ngIf="orderWindowStatus()!.isOpen">
    âœ… {{ orderWindowStatus()!.message }}
    <br />
    <strong>Fecha lÃ­mite:</strong> {{ getDeadlineDate() }}
  </div>

  <div class="alert alert-warning" *ngIf="!orderWindowStatus()!.isOpen">
    â° {{ orderWindowStatus()!.message }}
    <br />
    <strong>PrÃ³xima apertura:</strong> {{ getNextOpeningDate() }}
  </div>
</div>

<!-- BotÃ³n de notificaciones push -->
<div class="mb-4">
  <button
    class="btn btn-outline-primary"
    (click)="togglePushNotifications()"
    [disabled]="isSubscribing()">
    <span *ngIf="isSubscribing()">â³ Procesando...</span>
    <span *ngIf="!isSubscribing() && !isSubscribedToPush()">ğŸ”” Activar notificaciones</span>
    <span *ngIf="!isSubscribing() && isSubscribedToPush()">ğŸ”• Desactivar notificaciones</span>
  </button>
  <small class="d-block mt-2 text-muted" *ngIf="isSubscribedToPush()">
    RecibirÃ¡s una notificaciÃ³n 6 horas antes del cierre semanal de pedidos.
  </small>
</div>

<!-- Formulario (solo si estÃ¡ permitido pedir) -->
<div *ngIf="isOrderingAllowed()">
  <app-bocadillo-form
    [editingBocadillo]="editingBocadillo()"
    (bocadilloCreated)="onBocadilloCreated($event)"
    (bocadilloUpdated)="onBocadilloUpdated($event)" />
</div>

<!-- Lista de bocadillos -->
<app-bocadillo-list
  [refresh]="refreshList()"
  (editRequested)="onEditRequested($event)" />
